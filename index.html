<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>From TCFD to UK SRS: The 2026 Playbook | VP White</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fa; /* Lighter grey for minimalism */
        }
        .brand-navy { color: #002B45; }
        .bg-brand-navy { background-color: #002B45; }
        .border-brand-navy { border-color: #002B45; }
        
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .hero-bg {
            background-image: linear-gradient(rgba(0, 43, 69, 0.8), rgba(0, 43, 69, 0.7)), url('https://images.unsplash.com/photo-1533929736458-ca588d08c8be?q=80&w=2070&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
        }
        .card {
            background-color: white;
            border-radius: 0.5rem; /* Sharper corners for modern look */
            padding: 2rem;
            border: 1px solid #e9ecef; /* Subtle border */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.07), 0 4px 6px -4px rgb(0 0 0 / 0.07);
        }
        h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #002B45;
            margin-bottom: 1.5rem;
        }
        h3 {
            font-size: 1.25rem;
            font-weight: 600;
            color: #002B45;
            margin-bottom: 1rem;
        }
        .kicker {
            font-size: 0.875rem;
            font-weight: 600;
            color: #6c757d; /* Muted grey for kicker */
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 0.5rem;
        }
        .modal-overlay {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #002B45;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-gray-800">

    <header class="hero-bg text-white py-24 px-4 text-center">
        <div class="max-w-4xl mx-auto">
            <h1 class="text-4xl md:text-5xl font-extrabold leading-tight mb-4">From TCFD to UK SRS: The 2026 Playbook</h1>
            <p class="text-lg md:text-xl font-light text-gray-200 mb-6">A strategic guide for UK sustainability, finance & risk managers.</p>
            <p class="font-semibold">VP White</p>
        </div>
    </header>

    <main class="py-16 px-4 md:px-8">
        <div class="max-w-7xl mx-auto space-y-16">

            <section id="what-is-srs" class="card grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div>
                    <p class="kicker">The New Standard</p>
                    <h2>What is UK SRS?</h2>
                    <p class="mb-4 text-gray-600">UK Sustainability Reporting Standards (UK SRS) are a new framework, based on the global IFRS S1 and S2 standards, to standardise how UK companies report on sustainability-related financial risks and opportunities.</p>
                    <p class="font-semibold brand-navy">The core objective is to create consistent, comparable, and decision-useful information for investors using a financial materiality lens.</p>
                </div>
                <div>
                    <h3 class="text-center">Key Consultation Timeline</h3>
                    <div class="relative mt-8">
                        <div class="absolute w-full h-0.5 bg-gray-200 top-1/2 -translate-y-1/2"></div>
                        <div class="relative flex justify-between">
                            <div class="text-center w-1/3">
                                <div class="relative"><div class="mx-auto w-3 h-3 bg-brand-navy rounded-full z-10 relative"></div></div>
                                <p class="mt-2 font-bold text-sm">25 Jun 2025</p>
                                <p class="text-xs text-gray-500">Consultation Launched</p>
                            </div>
                            <div class="text-center w-1/3">
                                <div class="relative"><div class="mx-auto w-3 h-3 bg-brand-navy rounded-full z-10 relative"></div></div>
                                <p class="mt-2 font-bold text-sm">17 Sep 2025</p>
                                <p class="text-xs text-gray-500">Consultation Closes</p>
                            </div>
                            <div class="text-center w-1/3">
                               <div class="relative"><div class="mx-auto w-3 h-3 bg-brand-navy rounded-full z-10 relative"></div></div>
                                <p class="mt-2 font-bold text-sm">Q4 2025</p>
                                <p class="text-xs text-gray-500">Final Standards Published</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="srs-vs-ifrs" class="card">
                <p class="kicker text-center">Global Alignment</p>
                <h2 class="text-center">UK SRS vs. IFRS S1/S2</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-1">
                        <div class="chart-container h-64 md:h-auto">
                            <canvas id="alignmentChart"></canvas>
                        </div>
                        <p class="text-center font-bold text-lg mt-4 brand-navy">Near-Total Alignment with Global Baseline</p>
                    </div>
                    <div class="md:col-span-2">
                        <p class="mb-6 text-gray-600">The UK has made six pragmatic amendments to the IFRS standards, designed to ease the transition for UK companies without compromising the core principles of the global baseline.</p>
                        <ul class="space-y-3">
                            <li class="flex items-start"><span class="brand-navy font-bold text-xl mr-3">✓</span><div><strong class="brand-navy">Extended "Climate-First" Relief:</strong> Two years of climate-only reporting, double the IFRS relief period.</div></li>
                            <li class="flex items-start"><span class="brand-navy font-bold text-xl mr-3">✓</span><div><strong class="brand-navy">Optional SASB Use:</strong> Softened from "shall consider" to "may consider" SASB standards for industry metrics.</div></li>
                            <li class="flex items-start"><span class="brand-navy font-bold text-xl mr-3">✓</span><div><strong class="brand-navy">Flexible Industry Classification:</strong> Removed mandatory GICS® use for financed emissions.</div></li>
                        </ul>
                    </div>
                </div>
            </section>
            
            <section id="tcfd-delta" class="card">
                <p class="kicker text-center">The Data Evolution & AI Tools</p>
                <h2 class="text-center">TCFD → IFRS S2: The Data Delta</h2>
                <p class="max-w-3xl mx-auto text-center mb-12 text-gray-600">IFRS S2 fully incorporates TCFD but demands more granular data. Use our AI tools below to explore the new requirements.</p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-gray-50 p-6 rounded-lg flex flex-col border border-gray-200">
                        <h3 class="flex items-center">Governance</h3>
                        <p class="text-sm mt-2 flex-grow text-gray-600">More granular disclosures on how climate responsibilities are embedded in board mandates, roles, and policies.</p>
                        <button id="generateGovernanceBtn" class="mt-4 bg-brand-navy text-white font-bold py-2 px-4 rounded-md hover:bg-opacity-90 transition-colors w-full">✨ Draft Governance Disclosure</button>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg flex flex-col border-2 border-brand-navy">
                        <h3 class="flex items-center">Strategy <span class="ml-2 bg-brand-navy text-white text-xs font-bold px-2 py-1 rounded-full">NEW</span></h3>
                        <p class="text-sm mt-2 flex-grow text-gray-600">Requires quantified financial impacts on the balance sheet and detailed disclosure of transition plans if they exist.</p>
                    </div>
                     <div class="bg-gray-50 p-6 rounded-lg flex flex-col border border-gray-200">
                        <h3 class="flex items-center">Risk Management</h3>
                        <p class="text-sm mt-2 flex-grow text-gray-600">Deeper integration of climate risk processes into the overall Enterprise Risk Management (ERM) framework.</p>
                    </div>
                    <div class="bg-gray-50 p-6 rounded-lg flex flex-col border-2 border-brand-navy">
                        <h3 class="flex items-center">Metrics & Targets <span class="ml-2 bg-brand-navy text-white text-xs font-bold px-2 py-1 rounded-full">NEW</span></h3>
                        <p class="text-sm mt-2 flex-grow text-gray-600">Mandatory Scope 3 emissions, disclosure of industry-specific metrics, and details on carbon credit usage.</p>
                        <div class="mt-4 pt-4 border-t">
                            <label for="industrySelector" class="block text-sm font-medium text-gray-700 mb-2">Select your industry:</label>
                            <select id="industrySelector" class="w-full p-2 border border-gray-300 rounded-md">
                                <option>Financial Services</option>
                                <option>Energy</option>
                                <option>Technology & Communications</option>
                                <option>Healthcare</option>
                                <option>Consumer Goods & Retail</option>
                                <option>Transportation</option>
                                <option>Infrastructure & Real Estate</option>
                            </select>
                            <button id="generateMetricsBtn" class="mt-2 bg-brand-navy text-white font-bold py-2 px-4 rounded-md hover:bg-opacity-90 transition-colors w-full">✨ Generate Industry Metrics</button>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="reporting-evolution" class="card">
                 <p class="kicker text-center">The Journey to Now</p>
                 <h2 class="text-center">The Evolution of UK Climate Reporting</h2>
                 <p class="max-w-3xl mx-auto text-center mb-8 text-gray-600">UK SRS is the culmination of evolving frameworks, building on SECR and TCFD. This progression shows a clear trend towards more granular, integrated, and investor-focused disclosure.</p>
                 <div class="w-full overflow-x-auto">
                    <div class="chart-container max-w-none w-full" style="height: 500px;">
                        <canvas id="evolutionChart"></canvas>
                    </div>
                </div>
            </section>

            <section id="timeline" class="card">
                <p class="kicker text-center">Your Implementation Path</p>
                <h2 class="text-center">Two-Year “Climate-First” Relief</h2>
                <p class="max-w-3xl mx-auto text-center mb-12 text-gray-600">The UK's unique two-year relief provides a strategic, phased path. This allows companies to build capabilities sequentially rather than all at once.</p>
                <div class="relative">
                    <div class="hidden md:block absolute left-1/2 -ml-0.5 w-0.5 h-full bg-gray-200"></div>
                    <div class="space-y-12 md:space-y-0">
                        <div class="md:grid grid-cols-2 gap-8 relative">
                            <div class="text-right md:pr-8">
                                <p class="text-2xl font-bold brand-navy">Year 1</p>
                                <p class="text-lg font-semibold text-gray-500">(Reporting on FY2026)</p>
                            </div>
                            <div class="md:pl-8 md:border-l-2 border-brand-navy py-4">
                                <h3 class="text-xl font-bold brand-navy">Focus: Climate Disclosures Only</h3>
                                <p class="text-gray-600">Report against UK SRS S2 (climate), excluding Scope 3 GHG emissions. This is a "TCFD++" year, focused on embedding granular governance and risk management.</p>
                            </div>
                        </div>
                        <div class="md:grid grid-cols-2 gap-8 relative">
                            <div class="md:text-right md:pr-8 md:order-last">
                                <p class="text-2xl font-bold brand-navy">Year 2</p>
                                <p class="text-lg font-semibold text-gray-500">(Reporting on FY2027)</p>
                            </div>
                            <div class="md:pl-8 md:border-l-2 md:border-transparent md:border-r-2 border-brand-navy py-4 md:text-right md:pr-8">
                                <h3 class="text-xl font-bold brand-navy">Focus: Add Full Value Chain</h3>
                                <p class="text-gray-600">Full UK SRS S2 reporting, now including material Scope 3 GHG emissions. The primary challenge is mastering value chain data collection.</p>
                            </div>
                        </div>
                        <div class="md:grid grid-cols-2 gap-8 relative">
                           <div class="text-right md:pr-8">
                                <p class="text-2xl font-bold brand-navy">Year 3</p>
                                <p class="text-lg font-semibold text-gray-500">(Reporting on FY2028)</p>
                            </div>
                            <div class="md:pl-8 md:border-l-2 border-brand-navy py-4">
                                <h3 class="text-xl font-bold brand-navy">Focus: Full Sustainability Reporting</h3>
                                <p class="text-gray-600">Full UK SRS S1 & S2 reporting. Add disclosures on all other material topics (nature, water, human capital) from your materiality assessment.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="gap-analysis" class="card">
                <p class="kicker text-center">Action Plan</p>
                <h2 class="text-center">Data & Systems Gap Analysis</h2>
                <p class="max-w-3xl mx-auto text-center mb-8 text-gray-600">Producing reliable, auditable disclosures requires a robust data governance framework. Design processes with a clear audit trail from the start.</p>
                
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 text-center mb-12">
                    <div class="bg-gray-100 p-4 rounded-md shadow-sm">Data Sources</div>
                    <div class="text-2xl font-bold brand-navy">→</div>
                    <div class="bg-gray-100 p-4 rounded-md shadow-sm">Data Aggregation</div>
                    <div class="text-2xl font-bold brand-navy">→</div>
                    <div class="bg-gray-100 p-4 rounded-md shadow-sm">Internal Controls</div>
                    <div class="text-2xl font-bold brand-navy">→</div>
                    <div class="bg-brand-navy text-white p-4 rounded-md shadow-sm">Reporting & Assurance</div>
                </div>

                <h3 class="text-center mb-8">Your 90-Day Implementation Checklist</h3>
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="border-t-4 border-brand-navy bg-gray-50 p-6 rounded-b-md">
                        <h4 class="font-bold text-lg mb-2 brand-navy">Phase 1: Mobilise & Assess</h4>
                        <ul class="list-disc list-inside space-y-2 text-sm text-gray-600">
                            <li>Establish cross-functional working group.</li>
                            <li>Conduct detailed gap analysis of TCFD vs. UK SRS.</li>
                            <li>Educate Board and management on requirements.</li>
                        </ul>
                    </div>
                     <div class="border-t-4 border-brand-navy bg-gray-50 p-6 rounded-b-md">
                        <h4 class="font-bold text-lg mb-2 brand-navy">Phase 2: Deep-Dive & Plan</h4>
                        <ul class="list-disc list-inside space-y-2 text-sm text-gray-600">
                            <li>Map required data points to existing systems.</li>
                            <li>Assess maturity of internal controls over data.</li>
                            <li>Develop a detailed implementation roadmap.</li>
                        </ul>
                    </div>
                     <div class="border-t-4 border-brand-navy bg-gray-50 p-6 rounded-b-md">
                        <h4 class="font-bold text-lg mb-2 brand-navy">Phase 3: Secure & Resource</h4>
                        <ul class="list-disc list-inside space-y-2 text-sm text-gray-600">
                            <li>Present business case to leadership for budget.</li>
                            <li>Define target operating model (CFO/CSO roles).</li>
                            <li>Initiate selection of tech & assurance partners.</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="bg-brand-navy text-white mt-20">
        <div class="max-w-7xl mx-auto py-12 px-4 md:px-8 text-center">
            <h2 class="text-3xl font-bold text-white mb-4">Ready to build your 2026 playbook?</h2>
            <p class="mb-8 text-gray-300">Navigate the transition from TCFD to UK SRS with expert strategic guidance from VP White.</p>
            <div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-6">
                 <p><strong>VP White:</strong> anvar.darbayev@vpwhite.com</p>
            </div>
             <p class="text-xs text-gray-500 mt-12">This infographic is for informational purposes only. Data and timelines are based on information available as of July 2025.</p>
        </div>
    </footer>

    <div id="aiModal" class="modal-overlay fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4 hidden">
        <div class="modal-content bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col transform scale-95">
            <div class="flex justify-between items-center p-4 border-b">
                <h3 id="modalTitle" class="text-xl font-bold brand-navy">✨ AI-Generated Content</h3>
                <button id="closeModalBtn" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <div id="modalBody" class="p-6 overflow-y-auto">
                <div id="loader" class="flex justify-center items-center h-48">
                    <div class="loader"></div>
                </div>
                <div id="modalResult" class="hidden prose max-w-none"></div>
            </div>
            <div class="p-4 border-t bg-gray-50 text-xs text-gray-500 rounded-b-lg">
                <p>Generated by Gemini. This content is for illustrative purposes and should be reviewed and adapted by qualified professionals. It is not a substitute for legal or financial advice.</p>
            </div>
        </div>
    </div>


    <script>
        const brandColors = {
            navy: '#002B45',
            white: '#FFFFFF',
            lightGray: '#f8f9fa',
            mediumGray: '#adb5bd',
            darkGray: '#6c757d',
        };

        const chartTooltipOptions = {
            plugins: {
                tooltip: {
                    callbacks: {
                        title: function(tooltipItems) {
                            const item = tooltipItems[0];
                            let label = item.chart.data.labels[item.dataIndex];
                            if (Array.isArray(label)) {
                                return label.join(' ');
                            } else {
                                return label;
                            }
                        }
                    }
                }
            }
        };

        function wrapLabel(str, maxWidth) {
            if (str.length <= maxWidth) return str;
            const words = str.split(' ');
            let lines = [];
            let currentLine = words[0];
            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + words[i].length + 1 <= maxWidth) {
                    currentLine += ' ' + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        const alignmentCtx = document.getElementById('alignmentChart');
        if (alignmentCtx) {
            new Chart(alignmentCtx, {
                type: 'doughnut',
                data: {
                    labels: ['IFRS Aligned', 'UK Amendments'],
                    datasets: [{
                        label: 'Alignment',
                        data: [99, 1],
                        backgroundColor: [
                            brandColors.navy,
                            brandColors.mediumGray
                        ],
                        borderColor: brandColors.white,
                        borderWidth: 4,
                        hoverOffset: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: {
                        ...chartTooltipOptions.plugins,
                        legend: {
                            display: false
                        },
                         title: {
                            display: true,
                            text: '99% Identical',
                            position: 'top',
                            color: brandColors.navy,
                            font: {
                                size: 18,
                                weight: 'bold'
                            }
                        }
                    }
                }
            });
        }
        
        const evolutionCtx = document.getElementById('evolutionChart');
        if (evolutionCtx) {
            const labels = ['Governance', 'Strategy', 'Risk Management', 'Scope 1 & 2 GHG', 'Scope 3 GHG', 'Industry Metrics', 'Assurance'];
            new Chart(evolutionCtx, {
                type: 'bar',
                data: {
                    labels: labels.map(l => wrapLabel(l, 16)),
                    datasets: [
                        {
                            label: 'SECR (2019)',
                            data: [1, 1, 0.5, 3, 1, 0, 0], 
                            backgroundColor: '#e9ecef',
                        },
                        {
                            label: 'TCFD (Framework)',
                            data: [2, 2, 2, 3, 2, 1, 0], 
                            backgroundColor: '#adb5bd',
                        },
                        {
                            label: 'IFRS S2 (Global)',
                            data: [3, 3, 3, 3, 3, 3, 1], 
                             backgroundColor: '#6c757d',
                        },
                         {
                            label: 'UK SRS (2026+)',
                            data: [3, 3, 3, 3, 3, 2.5, 2], 
                            backgroundColor: brandColors.navy,
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            stacked: true,
                            display: false
                        },
                        y: {
                            stacked: true,
                            ticks: {
                                color: brandColors.navy,
                                font: {
                                    size: 14,
                                    weight: '500'
                                }
                            }
                        }
                    },
                    plugins: {
                        ...chartTooltipOptions.plugins,
                        legend: {
                            position: 'bottom',
                        },
                        tooltip: {
                             ...chartTooltipOptions.plugins.tooltip,
                            callbacks: {
                                ...chartTooltipOptions.plugins.tooltip.callbacks,
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    const value = context.raw;
                                    const requirementMap = {
                                        0: 'Not Required',
                                        0.5: 'Minimal',
                                        1: 'Voluntary/Implied',
                                        2: 'Recommended/Encouraged',
                                        2.5: 'Required (Optional Consideration)',
                                        3: 'Required'
                                    };
                                    label += requirementMap[value] || 'N/A';
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }

        const modal = document.getElementById('aiModal');
        const modalTitle = document.getElementById('modalTitle');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const loader = document.getElementById('loader');
        const modalResult = document.getElementById('modalResult');

        function openModal() {
            modal.classList.remove('hidden');
            document.body.classList.add('overflow-hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            }, 10);
        }

        function closeModal() {
            modal.classList.add('opacity-0');
            modal.querySelector('.modal-content').classList.add('scale-95');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.body.classList.remove('overflow-hidden');
                resetModal();
            }, 300);
        }

        function resetModal() {
            loader.classList.remove('hidden');
            modalResult.classList.add('hidden');
            modalResult.innerHTML = '';
        }

        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });

        function simpleMarkdownToHtml(text) {
            let html = text
                .replace(/^### (.*$)/gim, '<h3 class="text-lg font-semibold mb-2">$1</h3>')
                .replace(/^## (.*$)/gim, '<h2 class="text-xl font-bold mb-3">$1</h2>')
                .replace(/^# (.*$)/gim, '<h1 class="text-2xl font-extrabold mb-4">$1</h1>')
                .replace(/^\* (.*$)/gim, '<li>$1</li>')
                .replace(/\*\*(.*)\*\*/g, '<strong>$1</strong>')
                .replace(/\n/g, '<br>');
            
            html = html.replace(/<br><li>/g, '<li>');
            html = html.replace(/(<li>.*<\/li>)/g, '<ul class="list-disc list-inside space-y-1 mb-4">$1</ul>');
            html = html.replace(/<\/ul><br><ul class="list-disc list-inside space-y-1 mb-4">/g, '');

            return html;
        }

        async function callGemini(prompt) {
            openModal();
            // This is the new, secure endpoint for our serverless function
            const apiUrl = '/.netlify/functions/call-gemini'; 

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    // Send the prompt in the body for the function to use
                    body: JSON.stringify({ prompt: prompt }) 
                });

                if (!response.ok) {
                    throw new Error(`API request failed with status ${response.status}`);
                }

                // The serverless function returns the direct JSON from the Gemini API
                const result = await response.json();
                
                loader.classList.add('hidden');
                modalResult.classList.remove('hidden');

                if (result.candidates && result.candidates.length > 0 && result.candidates[0].content && result.candidates[0].content.parts && result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    modalResult.innerHTML = simpleMarkdownToHtml(text);
                } else {
                    modalResult.innerHTML = '<p class="text-red-500">Sorry, no content could be generated. Please try again.</p>';
                }
            } catch (error) {
                console.error("API call failed:", error);
                loader.classList.add('hidden');
                modalResult.classList.remove('hidden');
                modalResult.innerHTML = `<p class="text-red-500">An error occurred: ${error.message}. Please check the console for details.</p>`;
            }
        }

        document.getElementById('generateGovernanceBtn').addEventListener('click', () => {
            modalTitle.innerText = '✨ AI-Generated Governance Disclosure';
            const prompt = `Acting as an expert ESG reporting consultant, draft a sample board-level governance disclosure for a publicly listed UK company. This disclosure should align with the requirements of IFRS S2 and UK SRS regarding governance of climate-related risks and opportunities. Cover the board's oversight role, management's responsibilities, and how these are integrated into the company's governance structures. The tone should be professional and suitable for an annual report. Use markdown for formatting with headings and bullet points.`;
            callGemini(prompt);
        });

        document.getElementById('generateMetricsBtn').addEventListener('click', () => {
            const industry = document.getElementById('industrySelector').value;
            modalTitle.innerText = `✨ AI-Generated Metrics for ${industry}`;
            const prompt = `Acting as an expert ESG reporting consultant specializing in the ${industry} sector, provide a list of key climate-related metrics that a company in this industry should consider disclosing under IFRS S2 and UK SRS. Reference relevant SASB standards where applicable. Distinguish between cross-industry metrics (like GHG emissions) and industry-specific metrics. Present the information clearly using markdown with headings and bullet points.`;
            callGemini(prompt);
        });

    </script>

</body>
</html>

